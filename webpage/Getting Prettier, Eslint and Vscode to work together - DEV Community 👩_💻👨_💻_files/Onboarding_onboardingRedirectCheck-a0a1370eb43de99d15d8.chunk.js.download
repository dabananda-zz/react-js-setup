(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4,8,114],{0:function(e,n,t){"use strict";t.r(n),t.d(n,"render",(function(){return W})),t.d(n,"hydrate",(function(){return B})),t.d(n,"createElement",(function(){return y})),t.d(n,"h",(function(){return y})),t.d(n,"Fragment",(function(){return b})),t.d(n,"createRef",(function(){return v})),t.d(n,"isValidElement",(function(){return u})),t.d(n,"Component",(function(){return g})),t.d(n,"cloneElement",(function(){return F})),t.d(n,"createContext",(function(){return H})),t.d(n,"toChildArray",(function(){return P})),t.d(n,"options",(function(){return o}));var r,o,i,u,c,l,a,s,f={},d=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,n){for(var t in n)e[t]=n[t];return e}function h(e){var n=e.parentNode;n&&n.removeChild(e)}function y(e,n,t){var o,i,u,c={};for(u in n)"key"==u?o=n[u]:"ref"==u?i=n[u]:c[u]=n[u];if(arguments.length>2&&(c.children=arguments.length>3?r.call(arguments,2):t),"function"==typeof e&&null!=e.defaultProps)for(u in e.defaultProps)void 0===c[u]&&(c[u]=e.defaultProps[u]);return m(e,c,o,i,null)}function m(e,n,t,r,u){var c={type:e,props:n,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==u?++i:u};return null==u&&null!=o.vnode&&o.vnode(c),c}function v(){return{current:null}}function b(e){return e.children}function g(e,n){this.props=e,this.context=n}function w(e,n){if(null==n)return e.__?w(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?w(e):null}function O(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return O(e)}}function j(e){(!e.__d&&(e.__d=!0)&&c.push(e)&&!k.__r++||a!==o.debounceRendering)&&((a=o.debounceRendering)||l)(k)}function k(){for(var e;k.__r=c.length;)e=c.sort((function(e,n){return e.__v.__b-n.__v.__b})),c=[],e.some((function(e){var n,t,r,o,i,u;e.__d&&(i=(o=(n=e).__v).__e,(u=n.__P)&&(t=[],(r=p({},o)).__v=o.__v+1,U(u,o,r,n.__n,void 0!==u.ownerSVGElement,null!=o.__h?[i]:null,t,null==i?w(o):i,o.__h),A(t,o),o.__e!=i&&O(o)))}))}function S(e,n,t,r,o,i,u,c,l,a){var s,_,p,h,y,v,g,O=r&&r.__k||d,j=O.length;for(t.__k=[],s=0;s<n.length;s++)if(null!=(h=t.__k[s]=null==(h=n[s])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?m(null,h,null,null,h):Array.isArray(h)?m(b,{children:h},null,null,null):h.__b>0?m(h.type,h.props,h.key,null,h.__v):h)){if(h.__=t,h.__b=t.__b+1,null===(p=O[s])||p&&h.key==p.key&&h.type===p.type)O[s]=void 0;else for(_=0;_<j;_++){if((p=O[_])&&h.key==p.key&&h.type===p.type){O[_]=void 0;break}p=null}U(e,h,p=p||f,o,i,u,c,l,a),y=h.__e,(_=h.ref)&&p.ref!=_&&(g||(g=[]),p.ref&&g.push(p.ref,null,h),g.push(_,h.__c||y,h)),null!=y?(null==v&&(v=y),"function"==typeof h.type&&h.__k===p.__k?h.__d=l=C(h,l,e):l=E(e,h,p,O,y,l),"function"==typeof t.type&&(t.__d=l)):l&&p.__e==l&&l.parentNode!=e&&(l=w(p))}for(t.__e=v,s=j;s--;)null!=O[s]&&("function"==typeof t.type&&null!=O[s].__e&&O[s].__e==t.__d&&(t.__d=w(r,s+1)),R(O[s],O[s]));if(g)for(s=0;s<g.length;s++)N(g[s],g[++s],g[++s])}function C(e,n,t){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,n="function"==typeof r.type?C(r,n,t):E(t,r,r,o,r.__e,n));return n}function P(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){P(e,n)})):n.push(e)),n}function E(e,n,t,r,o,i){var u,c,l;if(void 0!==n.__d)u=n.__d,n.__d=void 0;else if(null==t||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),u=null;else{for(c=i,l=0;(c=c.nextSibling)&&l<r.length;l+=2)if(c==o)break e;e.insertBefore(o,i),u=i}return void 0!==u?u:o.nextSibling}function x(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||_.test(n)?t:t+"px"}function T(e,n,t,r,o){var i;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(n in r)t&&n in t||x(e.style,n,"");if(t)for(n in t)r&&t[n]===r[n]||x(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])i=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+i]=t,t?r||e.addEventListener(n,i?D:I,i):e.removeEventListener(n,i?D:I,i);else if("dangerouslySetInnerHTML"!==n){if(o)n=n.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"tabIndex"!==n&&"download"!==n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null!=t&&(!1!==t||"a"===n[0]&&"r"===n[1])?e.setAttribute(n,t):e.removeAttribute(n))}}function I(e){this.l[e.type+!1](o.event?o.event(e):e)}function D(e){this.l[e.type+!0](o.event?o.event(e):e)}function U(e,n,t,r,i,u,c,l,a){var s,f,d,_,h,y,m,v,w,O,j,k=n.type;if(void 0!==n.constructor)return null;null!=t.__h&&(a=t.__h,l=n.__e=t.__e,n.__h=null,u=[l]),(s=o.__b)&&s(n);try{e:if("function"==typeof k){if(v=n.props,w=(s=k.contextType)&&r[s.__c],O=s?w?w.props.value:s.__:r,t.__c?m=(f=n.__c=t.__c).__=f.__E:("prototype"in k&&k.prototype.render?n.__c=f=new k(v,O):(n.__c=f=new g(v,O),f.constructor=k,f.render=L),w&&w.sub(f),f.props=v,f.state||(f.state={}),f.context=O,f.__n=r,d=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=k.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=p({},f.__s)),p(f.__s,k.getDerivedStateFromProps(v,f.__s))),_=f.props,h=f.state,d)null==k.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==k.getDerivedStateFromProps&&v!==_&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(v,O),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(v,f.__s,O)||n.__v===t.__v){f.props=v,f.state=f.__s,n.__v!==t.__v&&(f.__d=!1),f.__v=n,n.__e=t.__e,n.__k=t.__k,n.__k.forEach((function(e){e&&(e.__=n)})),f.__h.length&&c.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(v,f.__s,O),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(_,h,y)}))}f.context=O,f.props=v,f.state=f.__s,(s=o.__r)&&s(n),f.__d=!1,f.__v=n,f.__P=e,s=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(r=p(p({},r),f.getChildContext())),d||null==f.getSnapshotBeforeUpdate||(y=f.getSnapshotBeforeUpdate(_,h)),j=null!=s&&s.type===b&&null==s.key?s.props.children:s,S(e,Array.isArray(j)?j:[j],n,t,r,i,u,c,l,a),f.base=n.__e,n.__h=null,f.__h.length&&c.push(f),m&&(f.__E=f.__=null),f.__e=!1}else null==u&&n.__v===t.__v?(n.__k=t.__k,n.__e=t.__e):n.__e=M(t.__e,n,t,r,i,u,c,a);(s=o.diffed)&&s(n)}catch(e){n.__v=null,(a||null!=u)&&(n.__e=l,n.__h=!!a,u[u.indexOf(l)]=null),o.__e(e,n,t)}}function A(e,n){o.__c&&o.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){o.__e(e,n.__v)}}))}function M(e,n,t,o,i,u,c,l){var a,s,d,_=t.props,p=n.props,y=n.type,m=0;if("svg"===y&&(i=!0),null!=u)for(;m<u.length;m++)if((a=u[m])&&(a===e||(y?a.localName==y:3==a.nodeType))){e=a,u[m]=null;break}if(null==e){if(null===y)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,p.is&&p),u=null,l=!1}if(null===y)_===p||l&&e.data===p||(e.data=p);else{if(u=u&&r.call(e.childNodes),s=(_=t.props||f).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!l){if(null!=u)for(_={},m=0;m<e.attributes.length;m++)_[e.attributes[m].name]=e.attributes[m].value;(d||s)&&(d&&(s&&d.__html==s.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,n,t,r,o){var i;for(i in t)"children"===i||"key"===i||i in n||T(e,i,null,t[i],r);for(i in n)o&&"function"!=typeof n[i]||"children"===i||"key"===i||"value"===i||"checked"===i||t[i]===n[i]||T(e,i,n[i],t[i],r)}(e,p,_,i,l),d)n.__k=[];else if(m=n.props.children,S(e,Array.isArray(m)?m:[m],n,t,o,i&&"foreignObject"!==y,u,c,u?u[0]:t.__k&&w(t,0),l),null!=u)for(m=u.length;m--;)null!=u[m]&&h(u[m]);l||("value"in p&&void 0!==(m=p.value)&&(m!==e.value||"progress"===y&&!m)&&T(e,"value",m,_.value,!1),"checked"in p&&void 0!==(m=p.checked)&&m!==e.checked&&T(e,"checked",m,_.checked,!1))}return e}function N(e,n,t){try{"function"==typeof e?e(n):e.current=n}catch(e){o.__e(e,t)}}function R(e,n,t){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||N(r,null,n)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,n)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&R(r[i],n,"function"!=typeof e.type);t||null==e.__e||h(e.__e),e.__e=e.__d=void 0}function L(e,n,t){return this.constructor(e,t)}function W(e,n,t){var i,u,c;o.__&&o.__(e,n),u=(i="function"==typeof t)?null:t&&t.__k||n.__k,c=[],U(n,e=(!i&&t||n).__k=y(b,null,[e]),u||f,f,void 0!==n.ownerSVGElement,!i&&t?[t]:u?null:n.firstChild?r.call(n.childNodes):null,c,!i&&t?t:u?u.__e:n.firstChild,i),A(c,e)}function B(e,n){W(e,n,B)}function F(e,n,t){var o,i,u,c=p({},e.props);for(u in n)"key"==u?o=n[u]:"ref"==u?i=n[u]:c[u]=n[u];return arguments.length>2&&(c.children=arguments.length>3?r.call(arguments,2):t),m(e.type,c,o||e.key,i||e.ref,null)}function H(e,n){var t={__c:n="__cC"+s++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e){var t,r;return this.getChildContext||(t=[],(r={})[n]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(j)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}};return t.Provider.__=t.Consumer.contextType=t}r=d.slice,o={__e:function(e,n){for(var t,r,o;n=n.__;)if((t=n.__c)&&!t.__)try{if((r=t.constructor)&&null!=r.getDerivedStateFromError&&(t.setState(r.getDerivedStateFromError(e)),o=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),o=t.__d),o)return t.__E=t}catch(n){e=n}throw e}},i=0,u=function(e){return null!=e&&void 0===e.constructor},g.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},t),this.props)),e&&p(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),j(this))},g.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),j(this))},g.prototype.render=b,c=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,k.__r=0,s=0},1:function(e,n,t){e.exports=t(12)()},11:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=["headers","body","method","csrfToken"];function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function l(e,n,t,r,o,i,u){try{var c=e[i](u),l=c.value}catch(a){return void t(a)}c.done?n(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function u(e){l(i,r,o,u,c,"next",e)}function c(e){l(i,r,o,u,c,"throw",e)}u(void 0)}))}}function s(e){return f.apply(this,arguments)}function f(){return f=a((function*(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.headers,o=n.body,u=n.method,l=void 0===u?"GET":u,a=n.csrfToken,s=void 0===a?yield getCsrfToken():a,f=c(n,r),d={body:o&&"string"!==typeof o?JSON.stringify(o):o},_=i(i({method:l,headers:i({Accept:"application/json","X-CSRF-Token":s,"Content-Type":"application/json"},t),credentials:"same-origin"},d),f);return fetch(e,_)})),f.apply(this,arguments)}},12:function(e,n,t){"use strict";var r=t(13);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,n,t,o,i,u){if(u!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function n(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:o};return t.PropTypes=t,t}},13:function(e,n,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},17:function(e,n,t){"use strict";t.r(n),t.d(n,"hasInstantClick",(function(){return u})),t.d(n,"displaySearchResults",(function(){return l})),t.d(n,"getSearchTermFromUrl",(function(){return a})),t.d(n,"preloadSearchResults",(function(){return s})),t.d(n,"fetchSearch",(function(){return f}));var r=t(6);function o(e,n){var t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,t=e.replace(/[[\]]/g,"\\$&"),r=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}(e,n);return t?"&".concat(e,"=").concat(t):""}function i(e){return o("filters",e)}function u(){return"undefined"!==typeof instantClick}function c(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function l(e){var n,t=e.searchTerm,r=e.location,u=void 0===r?window.location:r,l=u.origin,a=c(t),s=i(u.href),f=o("sort_by",n=u.href)+o("sort_direction",n);InstantClick.display("".concat(l,"/search?q=").concat(a).concat(s).concat(f))}function a(e){var n,t=new URLSearchParams(e),r=null!==(n=filterXSS(t.get("q")))&&void 0!==n?n:"",o=document.createElement("div");return o.innerHTML=r,null!==o.firstChild?o.firstChild.nodeValue:r}function s(e){var n=e.searchTerm,t=e.location,r=void 0===t?window.location:t,o=c(n.replace(/^[ ]+|[ ]+$/g,"")),u="".concat(r.origin,"/search?q=").concat(o).concat(i(r.href));InstantClick.preload(u)}function f(e,n){var t=function(e){var n=new URLSearchParams;return Object.keys(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,r)})),n.toString()}(n);return Object(r.b)("/search/".concat(e,"?").concat(t)).then((function(e){return e.json()}))}},23:function(e,n,t){"use strict";t.d(n,"d",(function(){return d})),t.d(n,"e",(function(){return _})),t.d(n,"g",(function(){return p})),t.d(n,"h",(function(){return h})),t.d(n,"f",(function(){return y})),t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return v})),t.d(n,"c",(function(){return b}));var r=t(17);t(57);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,o,i=[],u=!0,c=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);u=!0);}catch(l){c=!0,o=l}finally{try{u||null==t.return||t.return()}finally{if(c)throw o}}return i}(e,n)||u(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){if(e){if("string"===typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f=function(e){var n=e.resolve,t=e.reject,r=e.waitTime,o=void 0===r?20:r,i=0;return function e(){if(3e3!==i){var r,u=(document,null!==(r=document.querySelector("meta[name='csrf-token']"))?r.content:void 0),c=document.body.dataset.user;if(c&&void 0!==u){var l=JSON.parse(c);n({currentUser:l,csrfToken:u})}else i+=o,setTimeout(e,o)}else t(new Error("Couldn't find user data on page."))}},d=function(){var e=document.body.dataset.user;return JSON.parse(e)};function _(){return new Promise((function(e,n){f({resolve:e,reject:n})()}))}function p(){var e=document.getElementById("messagelist");e.scrollTop=e.scrollHeight}function h(e){var n=document.getElementById("messagelist__sentinel"),t=new IntersectionObserver(e,{threshold:[0,1]});t.observe(n),window.addEventListener("beforeunload",(function(){t.disconnect()})),"undefined"!==typeof instantClick&&InstantClick.on("change",(function(){t.disconnect()}))}function y(e,n){return Object.keys(e).reduce((function(t,r){var o=e[r].map((function(e){if(e.user_id===n){var t=Object.assign({type:"hidden"},e);return t.message="<message removed>",t.messageColor="lightgray",t}return e}));return a(a({},t),{},s({},r,o))}),{})}function m(e){var n=new Date(e);return n=new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(n)}var v=function(e,n,t){var r=e.filter((function(e){return e.viewable_by===n&&"active"===e.status})),o=e.filter((function(e){return"joining_request"===e.status})),u=[i(new Set(r.map((function(e){return e.chat_channel_id})))),i(new Set(o.map((function(e){return e.chat_channel_id}))))];return{activeChannels:r,discoverableChannels:e.filter((function(e){return"joining_request"===e.status&&t||!u[1].includes(e.chat_channel_id)&&e.viewable_by!==n})).filter((function(e){return!u[0].includes(e.chat_channel_id)}))}},b=function(e,n){var t={};if(e.filters){var i=o(e.filters.split(":"),2),u=i[0],c=i[1];t[u]=c}return t.per_page=30,t.page=n.paginationNumber,"discoverable"===n.searchType&&(t.user_id="all"),Object(r.fetchSearch)("chat_channels",t)}},48:function(e,n,t){"use strict";t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return u}));var r=t(0),o=t(1),i=t.n(o);function u(e,n){return t.e(122).then(t.t.bind(null,139,7)).then((function(t){var r=window.pusher,o=void 0===r?new Pusher(e,{authEndpoint:"/pusher/auth",auth:{headers:{"X-CSRF-Token":window.csrfToken}},cluster:"us2",encrypted:!0}):r;window.pusher=o;var i=o.subscribe(n.channelId.toString());return i.bind("message-created",n.messageCreated),i.bind("message-deleted",n.messageDeleted),i.bind("message-edited",n.messageEdited),i.bind("mentioned",n.mentioned),i.bind("message-opened",n.messageOpened),i.bind("channel-cleared",n.channelCleared),i.bind("user-banned",n.redactUserMessages),i.bind("pusher:subscription_error",n.channelError),i}))}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,n){return d=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},d(e,n)}function _(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)}}function p(e,n){if(n&&("object"===c(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&d(e,n)}(l,e);var n,t,o,c=_(l);function l(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,e)).propTypes={pusherKey:i.a.Object},n.updateMessageNotification=function(e){var t=document.getElementById("connect-number");if(n.setState({unopenedChannels:e}),e.length>0){if(e[0].adjusted_slug==="@".concat(userData().username))return;null===t||void 0===t||t.classList.remove("hidden"),t.innerHTML=e.length,document.getElementById("connect-link").href="/connect/".concat(e[0].adjusted_slug),InstantClick.preload(document.getElementById("connect-link").href,"force")}else null===t||void 0===t||t.classList.add("hidden")},n.removeMessage=function(){},n.updateMessage=function(){},n.mentionedMessage=function(e){window.location.pathname.startsWith("/connect")||(n.setState((function(n){return{unopenedChannels:n.unopenedChannels.map((function(n){return n.adjusted_slug===e.chat_channel_adjusted_slug?a(a({},n),{},{request_type:"mentioned"}):n})),visible:!0}})),n.hideNotice())},n.messageOpened=function(e){var t=n.state.unopenedChannels;window.location.pathname.startsWith("/connect")&&window.location.pathname.includes(e.adjusted_slug)&&n.updateMessageNotification(t.filter((function(n){return n.adjusted_slug!==e.adjusted_slug})))},n.receiveNewMessage=function(e){if(!(e.user_id===window.currentUser.id||window.location.pathname.startsWith("/connect")&&e.user_id===window.currentUser.id&&"direct"!==e.channel_type||window.location.pathname.includes(e.chat_channel_adjusted_slug))){var t=n.state.unopenedChannels,r={adjusted_slug:e.chat_channel_adjusted_slug},o=t.some((function(e){return e.adjusted_slug===r.adjusted_slug}));if(o||r.adjusted_slug==="@".concat(window.currentUser.username)||t.push(r),o){var i=t.findIndex((function(e){return e.adjusted_slug===r.adjusted_slug}));t[i].notified=!1}window.location.pathname.startsWith("/connect")||n.setState({visible:t.length>0&&e.user_id!==window.currentUser.id&&"direct"===e.channel_type}),n.updateMessageNotification(t),n.hideNotice()}},n.handleClick=function(){n.hideNotice()},n.hideNotice=function(){setTimeout((function(){n.setState((function(e){return{unopenedChannels:e.unopenedChannels.map((function(e){return e.notified?e:a(a({},e),{},{notified:!0})})),visible:!1}}))}),7500)},n.fetchUnopenedChannel=function(e){fetch("/chat_channels?state=unopened",{Accept:"application/json","Content-Type":"application/json",credentials:"same-origin"}).then((function(e){return e.json()})).then(e)},n.state={visible:!1,unopenedChannels:[]},n}return n=l,(t=[{key:"componentDidMount",value:function(){var e=this,n=this.props.pusherKey,t=document.body.dataset.appDomain;u(n,{channelId:"private-message-notifications--".concat(t,"-").concat(window.currentUser.id),messageCreated:this.receiveNewMessage,messageDeleted:this.removeMessage,messageEdited:this.updateMessage,mentioned:this.mentionedMessage,messageOpened:this.messageOpened}),this.fetchUnopenedChannel(this.updateMessageNotification),document.getElementById("connect-link")&&(document.getElementById("connect-link").onclick=function(){var n;null===(n=document.getElementById("connect-number"))||void 0===n||n.classList.add("hidden"),e.setState({visible:!1})})}},{key:"render",value:function(){var e=this.state,n=e.visible,t=e.unopenedChannels;if(n&&t.some((function(e){return!e.notified}))){var o=t.map((function(e){return e.notified?null:Object(r.h)("div",{key:e.id},"mentioned"===e.request_type?"You got mentioned in":"New Message from"," ",Object(r.h)("a",{href:"/connect/".concat(e.adjusted_slug),style:{background:"#66e2d5",color:"black",border:"1px solid black",padding:"2px 7px",display:"inline-block",margin:"3px 6px",borderRadius:"3px"}},e.adjusted_slug))}));return Object(r.h)("a",{href:"/connect/".concat(t[0].adjusted_slug),onClick:this.handleClick,style:{position:"fixed",zIndex:"200",top:"44px",right:0,left:0,background:"#66e2d5",borderBottom:"1px solid black",color:"black",fontWeight:"bold",textAlign:"center",fontSize:"17px",opacity:"0.94",padding:"19px 5px 14px"}},o)}return""}}])&&f(n.prototype,t),o&&f(n,o),l}(r.Component);function m(){window.frameElement||Object(r.render)(Object(r.h)(y,{pusherKey:document.body.dataset.pusherKey}),document.getElementById("message-notice"))}y.defaultProps={pusherKey:void 0}},6:function(e,n,t){"use strict";function r(e){if(e.ok)return e;try{e.json().then((function(e){throw new Error(e.error)}))}catch(n){throw n instanceof SyntaxError?new Error(e.statusText):n}}t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return o.a}));var o=t(11)}}]);
//# sourceMappingURL=Onboarding~onboardingRedirectCheck-a0a1370eb43de99d15d8.chunk.js.map